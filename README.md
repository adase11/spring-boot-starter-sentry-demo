# Demo Spring Boot + sentry-spring-boot-starter BeanPostProcessor Issues

This project aims to demonstrate how the combination of minimal spring-boot starters and
the spring-boot-sentry-starter project cause lots of noise in start up logs about sentry beans 'not eligible for getting processed by all BeanPostProcessors'.

# Link to issue
The issue opened up for this is [#3042](https://github.com/getsentry/sentry-java/issues/3042)

# Setup

I used [Spring initializr](https://start.spring.io/) to create this project with Maven, Java 21, and Spring Boot 3.1.5.
A link to those configs is [here](https://start.spring.io/#!type=maven-project&language=java&platformVersion=3.1.5&packaging=jar&jvmVersion=21&groupId=com.example.sentry&artifactId=sentry-starter-demo&name=sentry-starter-demo&description=Demo%20project%20for%20Spring%20Boot%20%2B%20Sentyr&packageName=com.example.sentry.sentry-starter-demo&dependencies=web,data-jpa,postgresql)
All that needs to be added is the `sentry-spring-boot-starter-jakarta` dependency.



## Demonstrations

To demonstrate the different behaviors the dependency on `spring-boot-starter-data-jpa` can be
toggled on and off in the [pom.xml](pom.xml) file.

Run the application with the dependency enabled and you'll see longs like this:

```bash
2023-11-08T13:49:41.938-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'io.sentry.spring.jakarta.checkin.SentryCheckInAdviceConfiguration' of type [io.sentry.spring.jakarta.checkin.SentryCheckInAdviceConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:41.949-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'io.sentry.spring.jakarta.checkin.SentryCheckInPointcutConfiguration' of type [io.sentry.spring.jakarta.checkin.SentryCheckInPointcutConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:41.953-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryCheckInPointcut' of type [org.springframework.aop.support.ComposablePointcut] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:41.958-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'io.sentry.spring.boot.jakarta.SentryAutoConfiguration$HubConfiguration' of type [io.sentry.spring.boot.jakarta.SentryAutoConfiguration$HubConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:41.965-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'io.sentry.spring.boot.jakarta.SentryAutoConfiguration$HubConfiguration$ContextTagsEventProcessorConfiguration' of type [io.sentry.spring.boot.jakarta.SentryAutoConfiguration$HubConfiguration$ContextTagsEventProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:42.101-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentry-io.sentry.spring.boot.jakarta.SentryProperties' of type [io.sentry.spring.boot.jakarta.SentryProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:42.112-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'contextTagsEventProcessor' of type [io.sentry.spring.jakarta.ContextTagsEventProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:42.118-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'inAppPackagesResolver' of type [io.sentry.spring.boot.jakarta.InAppIncludesResolver] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:42.123-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryOptionsConfiguration' of type [io.sentry.spring.boot.jakarta.SentryAutoConfiguration$HubConfiguration$$Lambda/0x0000000124396360] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:42.148-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryStarterDemoApplication' of type [com.example.sentry.sentrystarterdemo.SentryStarterDemoApplication$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:42.173-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryHub' of type [io.sentry.HubAdapter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:42.189-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryCheckInAdvice' of type [io.sentry.spring.jakarta.checkin.SentryCheckInAdvice] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:42.192-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryCheckInAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:42.193-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'io.sentry.spring.jakarta.exception.SentryExceptionParameterAdviceConfiguration' of type [io.sentry.spring.jakarta.exception.SentryExceptionParameterAdviceConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:42.199-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'io.sentry.spring.jakarta.exception.SentryCaptureExceptionParameterPointcutConfiguration' of type [io.sentry.spring.jakarta.exception.SentryCaptureExceptionParameterPointcutConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:42.200-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryCaptureExceptionParameterPointcut' of type [org.springframework.aop.support.ComposablePointcut] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:42.203-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryCaptureExceptionParameterAdvice' of type [io.sentry.spring.jakarta.exception.SentryCaptureExceptionParameterAdvice] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-11-08T13:49:42.203-05:00  INFO 42940 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryCaptureExceptionParameterAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)

```

Note that this becomes a warning in the logs when using Spring Boot 3.2.x + Java 21:

```bash
2023-11-08T13:54:32.821-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'io.sentry.spring.jakarta.checkin.SentryCheckInAdviceConfiguration' of type [io.sentry.spring.jakarta.checkin.SentryCheckInAdviceConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:32.830-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'io.sentry.spring.jakarta.checkin.SentryCheckInPointcutConfiguration' of type [io.sentry.spring.jakarta.checkin.SentryCheckInPointcutConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:32.839-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryCheckInPointcut' of type [org.springframework.aop.support.ComposablePointcut] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:32.842-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'io.sentry.spring.boot.jakarta.SentryAutoConfiguration$HubConfiguration' of type [io.sentry.spring.boot.jakarta.SentryAutoConfiguration$HubConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:32.854-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'io.sentry.spring.boot.jakarta.SentryAutoConfiguration$HubConfiguration$ContextTagsEventProcessorConfiguration' of type [io.sentry.spring.boot.jakarta.SentryAutoConfiguration$HubConfiguration$ContextTagsEventProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.203-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentry-io.sentry.spring.boot.jakarta.SentryProperties' of type [io.sentry.spring.boot.jakarta.SentryProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.284-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'contextTagsEventProcessor' of type [io.sentry.spring.jakarta.ContextTagsEventProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.298-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'inAppPackagesResolver' of type [io.sentry.spring.boot.jakarta.InAppIncludesResolver] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.309-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryOptionsConfiguration' of type [io.sentry.spring.boot.jakarta.SentryAutoConfiguration$HubConfiguration$$Lambda/0x00000001204f7148] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.348-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'spring.info-org.springframework.boot.autoconfigure.info.ProjectInfoProperties' of type [org.springframework.boot.autoconfigure.info.ProjectInfoProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.350-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration' of type [org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.364-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'gitProperties' of type [org.springframework.boot.info.GitProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.407-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryHub' of type [io.sentry.HubAdapter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.427-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryCheckInAdvice' of type [io.sentry.spring.jakarta.checkin.SentryCheckInAdvice] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.428-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryCheckInAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.430-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'io.sentry.spring.jakarta.exception.SentryExceptionParameterAdviceConfiguration' of type [io.sentry.spring.jakarta.exception.SentryExceptionParameterAdviceConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.439-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'io.sentry.spring.jakarta.exception.SentryCaptureExceptionParameterPointcutConfiguration' of type [io.sentry.spring.jakarta.exception.SentryCaptureExceptionParameterPointcutConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.441-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryCaptureExceptionParameterPointcut' of type [org.springframework.aop.support.ComposablePointcut] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.444-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryCaptureExceptionParameterAdvice' of type [io.sentry.spring.jakarta.exception.SentryCaptureExceptionParameterAdvice] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2023-11-08T13:54:33.445-05:00  WARN 43233 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'sentryCaptureExceptionParameterAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
```
